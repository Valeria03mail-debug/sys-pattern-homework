ages:
  - test
  - build

test:
  stage: test
  image: node:16-alpine
  script:
    - echo "Установка зависимостей"
    - npm install
    - echo "Запуск тестов"
    - npm test
    - echo "Проверка качества кода"
    - npm run lint

build:
  stage: build
  image: docker:latest
  services:
    - docker:dind
  before_script:
    - docker info
  script:
    - echo "Собираем Docker образ"
    - docker build -t my-app:$CI_COMMIT_SHORT_SHA .
    - echo "Образ успешно собран"
